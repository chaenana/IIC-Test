<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css" />
    <title>Download File</title>
</head>
<body>

    <h1 class="title">AI R&D</h1>

    <!-- 햄버거 메뉴 -->
    <div class="hamburger-menu" onclick="toggleSidebar()">
        <div></div>
        <div></div>
        <div></div>
    </div>

    <!-- 사이드바 -->
    <div id="sidebar" class="sidebar">
        <span class="close-btn" onclick="closeSidebar()">×</span>
        <a href="javascript:void(0);" onclick="window.open('https://172.10.3.141:8188', '_blank')">COMFYUI_ROOM 1</a>
        <a href="javascript:void(0);" onclick="window.open('https://172.10.3.141:8189', '_blank')">COMFYUI_ROOM 2</a>
    </div>

    <!-- 메인 콘텐츠 -->
    <div class="grid-container">
        <div class="container" id="con1" onclick="openSidePanel('workflow1')">
            <img src="https://via.placeholder.com/300x200" alt="Workflow Thumbnail">
            <button>Basic Work Flow with MetaData</button>
        </div>
        <div class="container" id="con2" onclick="openSidePanel('workflow2')">
            <img src="https://via.placeholder.com/300x200" alt="Workflow Thumbnail">
            <button>Basic Work Flow with MetaData</button>
        </div>
        <div class="container" id="con3" onclick="openSidePanel('workflow3')">
            <img src="https://via.placeholder.com/300x200" alt="Workflow Thumbnail">
            <button>Basic Work Flow with MetaData</button>
        </div>
        <div class="container" id="con4" onclick="openSidePanel('workflow4')">
            <img src="https://via.placeholder.com/300x200" alt="Workflow Thumbnail">
            <button>Basic Work Flow with MetaData</button>
        </div>
    </div>

    <!-- 오른쪽에서 밀고 들어오는 패널 -->
    <div id="sidePanel">
        <h2>새로운 화면</h2>
        <p>여기는 오른쪽에서 밀고 들어오는 새로운 div입니다.</p>
        <button class="download_sidePanel" onclick="window.open('https://172.10.0.152:5000/sharing/sXxbg1Ioe','_blank')">
                Download WorkFlow
        </button>
        <button class="close-btn-sidePanel" onclick="closeSidePanel()">닫기</button>
        <img src="https://via.placeholder.com/600x400" class="sidePanel_Thumbs"> <!-- 이미지 중앙 정렬 -->

        <p class="Description_Detail" id="Description_Detail"></p> <!-- Description을 동적으로 삽입할 부분 -->
    </div>

    <!-- JavaScript로 사이드바 열고 닫기 -->
    <script>
        // CSV 데이터를 담을 배열
        let workflowData = [];

        // CSV 파일을 읽어와서 데이터를 파싱하는 함수
        function loadCSVData() {
            fetch('Sheet1.csv')  // CSV 파일 경로
                .then(response => response.text())
                .then(text => {
                    const rows = text.split('\n');
                    for (let i = 1; i < rows.length; i++) {
                        const columns = rows[i].split(',');
                        if (columns.length >= 3) {
                            workflowData.push({
                                id: columns[0],  // ID (예: workflow1)
                                description: columns[2]  // Description
                            });
                        }
                    }
                })
                .catch(error => console.error('Error loading CSV data: ', error));
        }

        // Description을 업데이트하는 함수
        function loadDescriptionById(id) {
            const workflow = workflowData.find(item => item.id === id);
            if (workflow) {
                document.getElementById('Description_Detail').innerText = workflow.description;
            } else {
                document.getElementById('Description_Detail').innerText = 'No description available for this workflow.';
            }
        }

        // 각 버튼 클릭 시, 해당 ID에 맞는 Description을 로드
        function openSidePanel(workflowId) {
            document.getElementById('sidePanel').classList.add('open');
            loadDescriptionById(workflowId);  // ID에 맞는 Description 로드
        }

        // 오른쪽에서 밀고 들어오는 패널 닫기
        function closeSidePanel() {
            document.getElementById('sidePanel').classList.remove('open');
        }

        // 사이드바 열기
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const gridContainer = document.querySelector('.grid-container');
            if (sidebar.style.left === '0px') {
                sidebar.style.left = '-250px'; // 사이드바 닫기
                gridContainer.style.marginLeft = '0'; // 그리드 원위치
            } else {
                sidebar.style.left = '0'; // 사이드바 열기
                gridContainer.style.marginLeft = '250px'; // 그리드 이동
            }
        }

        // 사이드바 닫기 (X 버튼)
        function closeSidebar() {
            document.getElementById('sidebar').style.left = '-250px'; // 사이드바 닫기
            document.querySelector('.grid-container').style.marginLeft = '0'; // 그리드 원위치
        }

        // 페이지 로드 시 CSV 데이터 로드
        window.onload = function() {
            loadCSVData();
        };
    </script>

</body>
</html>
